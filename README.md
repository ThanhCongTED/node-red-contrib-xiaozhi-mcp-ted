# Node-REDç‰ˆå°æ™ºMCPå®¢æˆ·ç«¯

Node-REDèŠ‚ç‚¹é›†åˆï¼Œç”¨äºæ¥å…¥è™¾å“¥å°æ™ºAIå¹³å°ï¼Œè®©è®¾å¤‡é€šè¿‡å¯è§†åŒ–æµç¨‹ç¼–ç¨‹è½»æ¾æ¥å…¥AIæ§åˆ¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **å¯è§†åŒ–é…ç½®**: æ‹–æ‹½å¼èŠ‚ç‚¹é…ç½®ï¼Œæ— éœ€ç¼–ç¨‹
- ğŸ”— **WebSocketè¿æ¥**: æ”¯æŒws://å’Œwss://åè®®
- ğŸ› ï¸ **å·¥å…·ç®¡ç†**: åŠ¨æ€æ³¨å†Œå’Œç®¡ç†è®¾å¤‡å·¥å…·
- ğŸ“Š **çŠ¶æ€ç›‘æ§**: å®æ—¶è¿æ¥çŠ¶æ€å’Œæ€§èƒ½ç›‘æ§
- ğŸ”„ **è‡ªåŠ¨é‡è¿**: ç½‘ç»œæ–­å¼€è‡ªåŠ¨æ¢å¤è¿æ¥
- ğŸ’¬ **æ¶ˆæ¯å¤„ç†**: å®Œæ•´çš„JSON-RPC 2.0åè®®æ”¯æŒ

## èŠ‚ç‚¹åˆ—è¡¨

### xiaozhi-config (é…ç½®èŠ‚ç‚¹)
ç®¡ç†ä¸å°æ™ºMCPæœåŠ¡å™¨çš„è¿æ¥é…ç½®ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨åœ°å€ã€è®¤è¯ä»¤ç‰Œç­‰ã€‚

### xiaozhi-tool-register (å·¥å…·æ³¨å†ŒèŠ‚ç‚¹)
æ³¨å†Œè®¾å¤‡å·¥å…·åˆ°å°æ™ºå¹³å°ï¼Œå®šä¹‰å·¥å…·åç§°ã€æè¿°å’Œå‚æ•°schemaã€‚

### xiaozhi-tool-call (å·¥å…·è°ƒç”¨èŠ‚ç‚¹)
æ¥æ”¶æ¥è‡ªå°æ™ºå¹³å°çš„å·¥å…·è°ƒç”¨è¯·æ±‚ï¼Œè¾“å‡ºè°ƒç”¨å‚æ•°ä¾›æµç¨‹å¤„ç†ã€‚

### xiaozhi-status (çŠ¶æ€ç›‘æ§èŠ‚ç‚¹)
ç›‘æ§è¿æ¥çŠ¶æ€ã€ç»Ÿè®¡ä¿¡æ¯å’Œæ€§èƒ½æŒ‡æ ‡ã€‚

### xiaozhi-message (æ¶ˆæ¯å¤„ç†èŠ‚ç‚¹)
å‘é€å·¥å…·æ‰§è¡Œç»“æœå“åº”ç»™å°æ™ºå¹³å°ã€‚

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# é€šè¿‡npmå®‰è£…
npm install @maikemaker/node-red-contrib-xiaozhi-mcp

# æˆ–é€šè¿‡Node-REDç®¡ç†é¢æ¿å®‰è£…
# 1. æ‰“å¼€Node-REDç®¡ç†ç•Œé¢
# 2. ç‚¹å‡»å³ä¸Šè§’èœå• -> ç®¡ç†é¢æ¿ -> å®‰è£…
# 3. æœç´¢ "xiaozhi-mcp" å¹¶å®‰è£…
```

### åŸºæœ¬ä½¿ç”¨

1. **é…ç½®è¿æ¥**
   - æ‹–æ‹½ `xiaozhi-config` èŠ‚ç‚¹åˆ°æµç¨‹ä¸­
   - åŒå‡»é…ç½®æœåŠ¡å™¨åœ°å€å’Œè®¿é—®ä»¤ç‰Œ
   - ä¿å­˜é…ç½®

2. **æ³¨å†Œå·¥å…·**
   - æ·»åŠ  `xiaozhi-tool-register` èŠ‚ç‚¹
   - é€‰æ‹©å‰é¢é…ç½®çš„è¿æ¥
   - å®šä¹‰å·¥å…·åç§°ã€æè¿°å’Œå‚æ•°

3. **å¤„ç†è°ƒç”¨**
   - ä½¿ç”¨ `xiaozhi-tool-call` æ¥æ”¶è°ƒç”¨è¯·æ±‚
   - æ·»åŠ å¤„ç†é€»è¾‘ï¼ˆå¦‚functionèŠ‚ç‚¹ï¼‰
   - ä½¿ç”¨ `xiaozhi-message` å‘é€å“åº”

### ç¤ºä¾‹æµç¨‹

```json
[
  {
    "id": "config1",
    "type": "xiaozhi-config",
    "name": "å°æ™ºè¿æ¥",
    "endpoint": "wss://api.xiaozhi.me/mcp/?token=your-token"
  },
  {
    "id": "register1", 
    "type": "xiaozhi-tool-register",
    "xiaozhi": "config1",
    "toolName": "led_control",
    "toolDescription": "æ§åˆ¶LEDç¯å¼€å…³"
  }
]
```

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://gitee.com/maikemaker/node-red-contrib-xiaozhi-mcp.git
cd node-red-contrib-xiaozhi-mcp

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ£€æŸ¥
npm run lint

# æœ¬åœ°å®‰è£…åˆ°Node-RED
cd ~/.node-red
npm install /path/to/node-red-contrib-xiaozhi-mcp
```

### ç›®å½•ç»“æ„

```
node-red-contrib-xiaozhi-mcp/
â”œâ”€â”€ nodes/           # èŠ‚ç‚¹å®šä¹‰
â”œâ”€â”€ lib/            # æ ¸å¿ƒåº“
â”œâ”€â”€ test/           # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ examples/       # ç¤ºä¾‹æµç¨‹
â”œâ”€â”€ docs/           # æ–‡æ¡£
â””â”€â”€ icons/          # èŠ‚ç‚¹å›¾æ ‡
```

## APIæ–‡æ¡£

è¯¦ç»†çš„APIæ–‡æ¡£è¯·å‚è€ƒ [docs/api.md](docs/api.md)

## ç¤ºä¾‹

æ›´å¤šç¤ºä¾‹è¯·æŸ¥çœ‹ [examples/](examples/) ç›®å½•

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## è®¸å¯è¯

MIT License

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®ç°åŸºæœ¬çš„MCPå®¢æˆ·ç«¯åŠŸèƒ½
- æ”¯æŒå·¥å…·æ³¨å†Œå’Œè°ƒç”¨
- æä¾›å¯è§†åŒ–é…ç½®ç•Œé¢